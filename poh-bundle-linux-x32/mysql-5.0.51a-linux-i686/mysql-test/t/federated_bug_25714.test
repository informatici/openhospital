--source include/have_bug25714.inc
source include/federated.inc;


connection slave;
--disable_warnings
DROP TABLE IF EXISTS federated.bug_13118_table;
--enable_warnings

CREATE TABLE federated.t1 (
    `id` int auto_increment primary key, 
	`value` int
    ) ENGINE=MyISAM;
INSERT INTO federated.t1 SET value=1;
INSERT INTO federated.t1 SET value=2;
INSERT INTO federated.t1 SET value=2;

connection master;
--disable_warnings
DROP TABLE IF EXISTS federated.t1;
--enable_warnings

--replace_result $SLAVE_MYPORT SLAVE_PORT
eval CREATE TABLE federated.t1 (
    `id` int auto_increment primary key, 
	`value` int
    ) ENGINE=FEDERATED
    CONNECTION='mysql://root@127.0.0.1:$SLAVE_MYPORT/federated/t1';

SELECT * from federated.t1;

INSERT INTO federated.t1 SET value=4;

SELECT LAST_INSERT_ID();

--exec $MYSQL_BUG25714 $SLAVE_MYPORT
--exec $MYSQL_BUG25714 $MASTER_MYPORT

SELECT * from federated.t1;

DROP TABLE federated.t1;
connection slave;
DROP TABLE federated.t1;


source include/federated_cleanup.inc;

